language: r

matrix:
  include:
    - r: oldrel
      os: linux
      dist: trusty
      sudo: false

warnings_are_errors: true

env:
  - global:
    - WARNINGS_ARE_ERRORS=1
    - _R_CHECK_FORCE_SUGGESTS_=0
    - BOOTSTRAP_LATEX=1
    - R_BUILD_ARGS="--no-manual"
    - R_CHECK_ARGS="--no-manual --as-cran"

after_success:
  - test $TRAVIS_R_VERSION_STRING = 'release' && Rscript -e 'covr::codecov()' || echo "non-release build"

before_script:
  - test $TRAVIS_R_VERSION_STRING = 'release' && Rscript -e "utils::install.packages('covr')" || echo "non-release build"

