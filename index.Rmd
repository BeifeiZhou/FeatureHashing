---
title       : Introduction of Feature Hashing
subtitle    : Creates a Model Matrix via Feature Hashing With a Formula Interface
author      : Wush Wu
job         : Taiwan R User Group
framework   : io2012-wush
highlighter : highlight.js
hitheme     : zenburn
widgets     : [mathjax]            # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}
knit        : slidify::knit2slides
---

```{r setup, include=FALSE, cache=FALSE}
suppressPackageStartupMessages({
  library(knitr)
  library(ggplot2)
  library(xtable)
})
opts_chunk$set(echo = FALSE, cache = FALSE)
fig <- function(path, size = 100, style = NULL) {
  if (is.null(style)) sprintf('<img src="assets/img/%s" style="max-height: %d%%; max-width: %d%%;"/>', path, size, size)
  else sprintf('<img src="assets/img/%s" style="%s"/>', path, style)
}
center_fig <- function(path, size = 100, style = NULL) {
  sprintf('<center>%s</center>', fig(path, size, style))
}
```

## Wush, Co-founder of Taiwan R User Group

`r center_fig("farmer.jpg")`

--- &twocol

## Taiwan, a Mountainous Island

*** =left

`r center_fig("TaiwanMap.png", 80)`

*** =right

- Area: 0.5% of Australia's
- Population: 23 M $\approx$ Australia's
- Highest Mountain: Yushan (3952m)

`r center_fig("Mount_Yu_Shan_-_Taiwan.jpg")`

--- &twocol

## Taipei City and Taipei 101

`r center_fig("tpnightview.jpg")`

---

## Night Market

`r center_fig("nightmarket.jpg", 90)`

source: <http://edition.cnn.com/2014/01/15/travel/10-things-taiwan/>

--- &vcenter .largecontent

## Taiwan R User Group

<http://www.meetup.com/Taiwan-R>

`r center_fig("taiwan-r.jpg", 60)`

--- &vcenter .largecontent

## Outline

1. Feature Vectorization and Formula Interface in R
1. Feature Hashing

--- .segue .dark

## Feature Vectorization and Formula Interface in R

--- &vcenter .largecontent

## Algorithm in Text Book

### Regression

$$y = X \beta + \varepsilon$$

### Real Data

```{r iris}
iris.demo <- iris[c(1:2,51:52,101:102),]
kable(iris.demo)
```

- Where is $X$ and $y$?

--- &vcenter .largecontent

## Feature Vectorization and Formula Interface

- $X$ and $y$ are constructed via `model.matrix` in R

```{r model.matrix, echo = TRUE, results='hide'}
model.matrix(~ ., iris.demo)
```

```{r model.matrix.result}
kable(model.matrix(~ ., iris.demo))
```

--- &vcenter .largecontent

## Formula Interface

- `y ~ model`: `y` is modelled by a linear predictor specified symbolically by `model`
- Available symbol: column names of the data.frame
    - `iris`:
        - `Sepal.Length`
        - `Sepal.Width`
        - `Petal.Length`
        - `Petal.Width`
        - `Species`

--- &vcenter .largecontent

## Formula Interface

- `model.matrix(~ ., iris)`
    - `.` represents linear term of all columns except response in the data.frame

```{r formula-.}
all.equal(
  model.matrix(~., iris),
  model.matrix(~Sepal.Length+Sepal.Width+Petal.Length+Petal.Width+Species, iris)
  )

all.equal(
  model.matrix(Species ~ ., iris),
  model.matrix(Species ~ Sepal.Length+Sepal.Width+Petal.Length+Petal.Width, iris)
  )
```

--- &vcenter .largecontent


## Operator in Formula

- `+`, the basic operator of linear predictor
- `:`, the interaction operator of linear predictor

```{r model.matrix, echo = TRUE, results='hide'}
model.matrix(~ Sepal.Length+Sepal.Width+Sepal.Length:Sepal.Width, iris.demo)
```

```{r model.matrix.result}
kable(model.matrix(~ Sepal.Length+Sepal.Width+Sepal.Length:Sepal.Width, iris.demo))
```


--- &vcenter .largecontent

## Numeric Feature and Formula Operator

```{r numeric.feature, echo = TRUE, results='hide'}
model.matrix(~ Sepal.Length + Sepal.Length:Sepal.Width, iris.demo)
```

```{r numeric.feature.result}
kable(model.matrix(~ Sepal.Length + Sepal.Length:Sepal.Width, iris.demo))
```

--- &vcenter .largecontent

## Categorical Feature and Contrast

--- &vcenter .largecontent

## Limitation of `model.matrix`

--- &vcenter .largecontent

## Hash Function

--- &vcenter .largecontent

## Feature Hashing

--- &vcenter .largecontent

## Pros and Cons

--- &vcenter .largecontent

